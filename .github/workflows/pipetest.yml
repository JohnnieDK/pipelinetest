name: Linting

on: [push]

jobs:
  lint-tf:

    runs-on: ubuntu-latest

    container: linuxbrew/brew:latest

    steps:
    - uses: actions/checkout@v1
    - name: install terraform/grunt
      run: |
        brew install terraform terragrunt

    - name: terraform fmt
      id: fmt
      run: terraform fmt -check -recursive -diff -no-color

    - name: terragrunt hclfmt
      id: fmt
      run: |
        terragrunt hclfmt --terragrunt-check